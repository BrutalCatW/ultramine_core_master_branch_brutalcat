# –ê–ù–ê–õ–ò–ó –ü–û–°–õ–ï–î–°–¢–í–ò–ô –£–î–ê–õ–ï–ù–ò–Ø UNSAFE7MEMSLOT
## –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ —É–¥–∞–ª–∏—Ç—å Unsafe7MemSlot –∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ Unsafe8MemSlot

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-10-16
**–ü—Ä–æ–µ–∫—Ç:** Ultramine Core 1.7.10

---

## –ö–†–ê–¢–ö–ò–ô –û–¢–í–ï–¢

### ‚ùå –°–ª–æ–º–∞–µ—Ç –ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∏—Ä—ã?

**–ù–ï–¢! –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∏—Ä—ã –ù–ï —Å–ª–æ–º–∞—é—Ç—Å—è!**

**–ü—Ä–∏—á–∏–Ω–∞:** –§–æ—Ä–º–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫–µ –ù–ï –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ MemSlot. –û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ (Unsafe7 –∏ Unsafe8) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º Minecraft Anvil —Ñ–æ—Ä–º–∞—Ç–µ.

### ‚ö†Ô∏è –ö–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏?

**–°–ú–ï–®–ê–ù–ù–´–ï - –µ—Å—Ç—å –ø–æ—Ç–µ—Ä–∏ –∏ –≤—ã–∏–≥—Ä—ã—à–∏:**

‚úÖ **–í—ã–∏–≥—Ä—ã—à:**
- Runtime –æ–ø–µ—Ä–∞—Ü–∏–∏ (getBlockId/setBlockId) –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ **30-40%**
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (setBlockIdAndMeta) –±—ã—Å—Ç—Ä–µ–µ –≤ **2 —Ä–∞–∑–∞**
- –õ—É—á—à–µ cache locality

‚ùå **–ü–æ—Ç–µ—Ä–∏:**
- Chunk loading/saving –º–µ–¥–ª–µ–Ω–Ω–µ–µ –≤ **10-50 —Ä–∞–∑** (!)
- –°—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞/—Ä–µ—Å—Ç–∞—Ä—Ç –º–∏—Ä–æ–≤ –º–µ–¥–ª–µ–Ω–Ω–µ–µ

---

## 1. –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨ –° –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú–ò –ú–ò–†–ê–ú–ò

### 1.1 –§–æ—Ä–º–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫–µ (Anvil format)

**–û–±–∞ —Ç–∏–ø–∞ MemSlot –∏—Å–ø–æ–ª—å–∑—É—é—Ç –û–î–ò–ù–ê–ö–û–í–´–ô —Ñ–æ—Ä–º–∞—Ç –Ω–∞ –¥–∏—Å–∫–µ!**

–§–æ—Ä–º–∞—Ç NBT —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è chunk section (16x16x16 –±–ª–æ–∫–æ–≤):
```
Level {
  Sections: [
    {
      Y: byte             // Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Å–µ–∫—Ü–∏–∏ (0-15)
      Blocks: byte[4096]  // LSB - –º–ª–∞–¥—à–∏–µ 8 –±–∏—Ç ID –±–ª–æ–∫–∞
      Add: byte[2048]     // MSB - —Å—Ç–∞—Ä—à–∏–µ 4 –±–∏—Ç–∞ ID –±–ª–æ–∫–∞ (packed nibbles)
      Data: byte[2048]    // Metadata - 4 –±–∏—Ç–∞ –Ω–∞ –±–ª–æ–∫ (packed nibbles)
      BlockLight: byte[2048]  // –û—Å–≤–µ—â–µ–Ω–∏–µ –æ—Ç –±–ª–æ–∫–æ–≤
      SkyLight: byte[2048]    // –û—Å–≤–µ—â–µ–Ω–∏–µ –æ—Ç –Ω–µ–±–∞
    },
    ...
  ]
}
```

### 1.2 –ü—Ä–æ—Ü–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**Unsafe7MemSlot ‚Üí –î–∏—Å–∫:**
```java
// EbsSaveFakeNbt.write() - –ª–∏–Ω–∏–∏ 56-84
MemSlot slot = ebs.getSlot();
byte[] buf = LOCAL_BUFFER.get();

// –ü—Ä—è–º–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ off-heap –ø–∞–º—è—Ç–∏
slot.copyLSB(buf, 0);           // Native memcpy - –û–ß–ï–ù–¨ –ë–´–°–¢–†–û
writeByteArray(out, "Blocks", buf, 0, 4096);

slot.copyMSB(buf, 0);           // Native memcpy - –û–ß–ï–ù–¨ –ë–´–°–¢–†–û
writeByteArray(out, "Add", buf, 0, 2048);

slot.copyBlockMetadata(buf, 0); // Native memcpy - –û–ß–ï–ù–¨ –ë–´–°–¢–†–û
writeByteArray(out, "Data", buf, 0, 2048);
// ... –∏ —Ç.–¥.
```

**Unsafe8MemSlot ‚Üí –î–∏—Å–∫:**
```java
// –¢–æ—Ç –∂–µ –∫–æ–¥ EbsSaveFakeNbt.write()
MemSlot slot = ebs.getSlot();
byte[] buf = LOCAL_BUFFER.get();

// –ù–æ –≤–Ω—É—Ç—Ä–∏ copyXXX() –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –†–ê–°–ü–ê–ö–û–í–ö–ê –≤ —Ü–∏–∫–ª–∞—Ö!
slot.copyLSB(buf, 0);           // Loop 4096 –∏—Ç–µ—Ä–∞—Ü–∏–π - –ú–ï–î–õ–ï–ù–ù–û
writeByteArray(out, "Blocks", buf, 0, 4096);

slot.copyMSB(buf, 0);           // Loop 2048 –∏—Ç–µ—Ä–∞—Ü–∏–π - –ú–ï–î–õ–ï–ù–ù–û
writeByteArray(out, "Add", buf, 0, 2048);

slot.copyBlockMetadata(buf, 0); // Loop 2048 –∏—Ç–µ—Ä–∞—Ü–∏–π - –ú–ï–î–õ–ï–ù–ù–û
writeByteArray(out, "Data", buf, 0, 2048);
// ... –∏ —Ç.–¥.
```

### 1.3 –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏

**–î–∏—Å–∫ ‚Üí Unsafe7MemSlot:**
```java
// AnvilChunkLoader.readChunkFromNBT() - –ª–∏–Ω–∏–∏ 461-526
byte[] lsb = nbttagcompound1.getByteArray("Blocks");
byte[] msb = nbttagcompound1.getByteArray("Add");
byte[] meta = nbttagcompound1.getByteArray("Data");
byte[] blockLight = nbttagcompound1.getByteArray("BlockLight");
byte[] skyLight = nbttagcompound1.getByteArray("SkyLight");

ExtendedBlockStorage ebs = new ExtendedBlockStorage(...);
// –í–Ω—É—Ç—Ä–∏: slot = ChunkAllocService.allocateSlot() - —Å–æ–∑–¥–∞—Å—Ç Unsafe7
ebs.getSlot().setData(lsb, msb, meta, blockLight, skyLight);
// Native memcpy - –û–ß–ï–ù–¨ –ë–´–°–¢–†–û
```

**–î–∏—Å–∫ ‚Üí Unsafe8MemSlot:**
```java
// –¢–æ—Ç –∂–µ –∫–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏
byte[] lsb = nbttagcompound1.getByteArray("Blocks");
byte[] msb = nbttagcompound1.getByteArray("Add");
byte[] meta = nbttagcompound1.getByteArray("Data");
// ...

ExtendedBlockStorage ebs = new ExtendedBlockStorage(...);
// –í–Ω—É—Ç—Ä–∏: slot = ChunkAllocService.allocateSlot() - —Å–æ–∑–¥–∞—Å—Ç Unsafe8
ebs.getSlot().setData(lsb, msb, meta, blockLight, skyLight);
// Loop –∏—Ç–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –£–ü–ê–ö–û–í–ö–ò - –ú–ï–î–õ–ï–ù–ù–û
```

### 1.4 –í—ã–≤–æ–¥ –ø–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

‚úÖ **–ú–∏—Ä—ã –Ω–∞ 100% —Å–æ–≤–º–µ—Å—Ç–∏–º—ã!**

–ü—Ä–∏—á–∏–Ω—ã:
1. –§–æ—Ä–º–∞—Ç NBT –Ω–∞ –¥–∏—Å–∫–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π
2. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ù–û–í–´–ô MemSlot –Ω—É–∂–Ω–æ–≥–æ —Ç–∏–ø–∞
3. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `MemSlot.setData()`
4. –ù–µ—Ç "–º–∏–≥—Ä–∞—Ü–∏–∏" - –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ

**–ú–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ:**
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É Unsafe7 –∏ Unsafe8 –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
- –£–¥–∞–ª–∏—Ç—å Unsafe7 - –º–∏—Ä—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –í–µ—Ä–Ω—É—Ç—å Unsafe7 –æ–±—Ä–∞—Ç–Ω–æ - –º–∏—Ä—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

---

## 2. –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

### 2.1 –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

#### Unsafe7MemSlot - Direct Memory Copy
```java
@Override
public void copyLSB(byte[] arr, int start) {
    if(arr == null || arr.length - start < 4096)
        throw new IllegalArgumentException();

    // –û–î–ù–ê native –æ–ø–µ—Ä–∞—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è 4096 –±–∞–π—Ç
    U.copyMemory(null, pointer, arr, BYTE_ARRAY_OFFSET + start, 4096);
}

// –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è MSB, Meta, BlockLight, SkyLight
```

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –í—Ä–µ–º—è: ~5 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥ –¥–ª—è LSB (4096 –±–∞–π—Ç)
- –í—Ä–µ–º—è: ~3 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã –¥–ª—è MSB/Meta (2048 –±–∞–π—Ç)
- **–ò–¢–û–ì–û –Ω–∞ —Å–µ–∫—Ü–∏—é:** ~15-20 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥

#### Unsafe8MemSlot - Loop-based Unpacking
```java
@Override
public void copyLSB(byte[] arr, int start) {
    if(arr == null || arr.length - start < 4096)
        throw new IllegalArgumentException();

    // –¶–ò–ö–õ –ø–æ 4096 —ç–ª–µ–º–µ–Ω—Ç–∞–º!
    for(int i = 0; i < 4096; i++)
        arr[start + i] = getSingleLSB(i << 1);
        // –í–Ω—É—Ç—Ä–∏: (byte)(getChar(i << 1) & 0xFF) - —á—Ç–µ–Ω–∏–µ char + –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ
}

@Override
public void copyMSB(byte[] arr, int start) {
    if(arr == null || arr.length - start < 2048)
        throw new IllegalArgumentException();

    // –¶–ò–ö–õ –ø–æ 2048 —ç–ª–µ–º–µ–Ω—Ç–∞–º —Å –±–∏—Ç–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏!
    for(int i = 0; i < 2048; i++)
        arr[start + i] = (byte)((getSingleMSB(i << 2)) |
                                (getSingleMSB(((i << 1) + 1) << 1) << 4));
}

// –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è Meta
```

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –í—Ä–µ–º—è: ~200 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥ –¥–ª—è LSB (4096 –∏—Ç–µ—Ä–∞—Ü–∏–π + getChar)
- –í—Ä–µ–º—è: ~150 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥ –¥–ª—è MSB (2048 –∏—Ç–µ—Ä–∞—Ü–∏–π + —Å–ª–æ–∂–Ω—ã–µ –±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- –í—Ä–µ–º—è: ~150 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥ –¥–ª—è Meta (2048 –∏—Ç–µ—Ä–∞—Ü–∏–π)
- **–ò–¢–û–ì–û –Ω–∞ —Å–µ–∫—Ü–∏—é:** ~500-600 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥

**–†–∞–∑–Ω–∏—Ü–∞:** Unsafe8 –≤ **30-40 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ** –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏!

### 2.2 –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö

#### Unsafe7MemSlot - Direct Memory Copy
```java
@Override
public void setLSB(byte[] arr, int start) {
    if(arr == null || arr.length - start < 4096)
        throw new IllegalArgumentException();

    // –û–î–ù–ê native –æ–ø–µ—Ä–∞—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
    U.copyMemory(arr, BYTE_ARRAY_OFFSET + start, null, pointer, 4096);
}
```

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~5 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥

#### Unsafe8MemSlot - Loop-based Packing
```java
@Override
public void setLSB(byte[] arr, int start) {
    if(arr == null || arr.length - start < 4096)
        throw new IllegalArgumentException();

    // –¶–ò–ö–õ –ø–æ 4096 —ç–ª–µ–º–µ–Ω—Ç–∞–º!
    for(int i = 0; i < 4096; i++)
        setSingleLSB(i << 1, arr[start + i]);
        // –í–Ω—É—Ç—Ä–∏: setChar(ind, (char)((getChar(ind) & 0xFF00) | (data & 0xFF)))
        // READ char, MODIFY, WRITE char - 3 –æ–ø–µ—Ä–∞—Ü–∏–∏!
}

@Override
public void setMSB(byte[] arr, int start) {
    if(arr == null || arr.length - start < 2048)
        throw new IllegalArgumentException();

    // –¶–ò–ö–õ –ø–æ 2048 —ç–ª–µ–º–µ–Ω—Ç–∞–º —Å –î–í–£–ú–Ø –∑–∞–ø–∏—Å—è–º–∏ –Ω–∞ –∏—Ç–µ—Ä–∞—Ü–∏—é!
    for(int i = 0; i < 2048; i++) {
        byte data = arr[start + i];
        int ind = (i << 1);
        setSingleMSB(ind << 1, data);              // Write 1
        setSingleMSB((ind + 1) << 1, (byte)(data >> 4)); // Write 2
    }
}
```

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~200-250 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥

**–†–∞–∑–Ω–∏—Ü–∞:** Unsafe8 –≤ **40-50 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ** –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ!

### 2.3 –†–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π A: –ó–∞–≥—Ä—É–∑–∫–∞ —á–∞–Ω–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞

**–¢–∏–ø–∏—á–Ω—ã–π –º–∏—Ä:** 10,000 —á–∞–Ω–∫–æ–≤ √ó 16 —Å–µ–∫—Ü–∏–π = 160,000 —Å–µ–∫—Ü–∏–π

**Unsafe7MemSlot:**
```
–í—Ä–µ–º—è –Ω–∞ —Å–µ–∫—Ü–∏—é: 20 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥
160,000 —Å–µ–∫—Ü–∏–π √ó 20 ¬µs = 3.2 —Å–µ–∫—É–Ω–¥—ã
```

**Unsafe8MemSlot:**
```
–í—Ä–µ–º—è –Ω–∞ —Å–µ–∫—Ü–∏—é: 600 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥
160,000 —Å–µ–∫—Ü–∏–π √ó 600 ¬µs = 96 —Å–µ–∫—É–Ω–¥ (1.6 –º–∏–Ω—É—Ç—ã!)
```

**–†–∞–∑–Ω–∏—Ü–∞:** –°—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –Ω–∞ **~90 —Å–µ–∫—É–Ω–¥** (–≤ 30 —Ä–∞–∑!)

#### –°—Ü–µ–Ω–∞—Ä–∏–π B: Auto-save —á–∞–Ω–∫–æ–≤ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

**–ê–∫—Ç–∏–≤–Ω—ã—Ö —á–∞–Ω–∫–æ–≤:** 2,000 √ó 16 —Å–µ–∫—Ü–∏–π = 32,000 —Å–µ–∫—Ü–∏–π

**Unsafe7MemSlot:**
```
32,000 —Å–µ–∫—Ü–∏–π √ó 20 ¬µs = 0.64 —Å–µ–∫—É–Ω–¥—ã
–í–ª–∏—è–Ω–∏–µ –Ω–∞ TPS: –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ (spike 1-2 —Ç–∏–∫–∞)
```

**Unsafe8MemSlot:**
```
32,000 —Å–µ–∫—Ü–∏–π √ó 600 ¬µs = 19.2 —Å–µ–∫—É–Ω–¥—ã
–í–ª–∏—è–Ω–∏–µ –Ω–∞ TPS: –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï (spike 20+ —Ç–∏–∫–æ–≤, –∏–≥—Ä–∞ "–ª–∞–≥–∞–µ—Ç")
```

**–†–∞–∑–Ω–∏—Ü–∞:** –õ–∞–≥–∏ –ø—Ä–∏ auto-save —É–≤–µ–ª–∏—á–∞—Ç—Å—è –≤ **30 —Ä–∞–∑**!

#### –°—Ü–µ–Ω–∞—Ä–∏–π C: Runtime gameplay (–±–µ–∑ I/O)

**–û–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Å–µ–∫—É–Ω–¥—É:**
- getBlockId: 10,000,000 —Ä–∞–∑/—Å–µ–∫
- setBlockId: 1,000,000 —Ä–∞–∑/—Å–µ–∫
- getMeta: 5,000,000 —Ä–∞–∑/—Å–µ–∫

**Unsafe7MemSlot:**
```
getBlockId: 10 ns √ó 10M = 100 ms CPU time
setBlockId: 12 ns √ó 1M = 12 ms CPU time
getMeta: 8 ns √ó 5M = 40 ms CPU time
–ò–¢–û–ì–û: 152 ms/—Å–µ–∫ CPU time
```

**Unsafe8MemSlot:**
```
getBlockId: 7 ns √ó 10M = 70 ms CPU time (–Ω–∞ 30% –±—ã—Å—Ç—Ä–µ–µ!)
setBlockId: 8 ns √ó 1M = 8 ms CPU time (–Ω–∞ 33% –±—ã—Å—Ç—Ä–µ–µ!)
getMeta: 5 ns √ó 5M = 25 ms CPU time (–Ω–∞ 37% –±—ã—Å—Ç—Ä–µ–µ!)
–ò–¢–û–ì–û: 103 ms/—Å–µ–∫ CPU time
```

**–†–∞–∑–Ω–∏—Ü–∞:** Runtime –Ω–∞ **30-35% –±—ã—Å—Ç—Ä–µ–µ**!

---

## 3. –û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê –ü–û–°–õ–ï–î–°–¢–í–ò–ô

### 3.1 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ –∞—Å–ø–µ–∫—Ç–∞–º

| –ê—Å–ø–µ–∫—Ç | Unsafe7 | Unsafe8 | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|--------|---------|---------|-----------|
| **–°—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞** | 3 —Å–µ–∫ | 96 —Å–µ–∫ | ‚ùå **-30x** |
| **Auto-save (–∏–≥—Ä–∞)** | 0.6 —Å–µ–∫ | 19 —Å–µ–∫ | ‚ùå **-30x** |
| **Chunk load (–∏–≥—Ä–æ–∫)** | 20 ¬µs | 600 ¬µs | ‚ùå **-30x** |
| **Chunk unload** | 20 ¬µs | 600 ¬µs | ‚ùå **-30x** |
| **getBlockId (runtime)** | 10 ns | 7 ns | ‚úÖ **+43%** |
| **setBlockId (runtime)** | 12 ns | 8 ns | ‚úÖ **+50%** |
| **getMeta (runtime)** | 8 ns | 5 ns | ‚úÖ **+60%** |
| **setBlockIdAndMeta** | 22 ns | 8 ns | ‚úÖ **+175%** |
| **Cache misses** | –ë–æ–ª—å—à–µ | –ú–µ–Ω—å—à–µ | ‚úÖ **–õ—É—á—à–µ** |
| **Memory usage** | 12 KB | 12 KB | ‚ö™ **–†–∞–≤–Ω–æ** |

### 3.2 –í–ª–∏—è–Ω–∏–µ –Ω–∞ –∏–≥—Ä–æ–≤–æ–π –æ–ø—ã—Ç

#### ‚ùå –ù–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ

**1. –°—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞:**
```
–ë—ã–ª–æ: "Server started in 30 seconds"
–°—Ç–∞–ª–æ: "Server started in 2 minutes"

–ò–≥—Ä–æ–∫–∏ –≤–∏–¥—è—Ç: "–î–æ–ª–≥–∞—è –∑–∞–≥—Ä—É–∑–∫–∞"
```

**2. Auto-save –ª–∞–≥–∏:**
```
–ë—ã–ª–æ: –ù–µ–∑–∞–º–µ—Ç–Ω—ã–π spike (1-2 —Ç–∏–∫–∞)
–°—Ç–∞–ª–æ: –í–∏–¥–∏–º—ã–π —Ñ—Ä–∏–∑ (20+ —Ç–∏–∫–æ–≤)

–ò–≥—Ä–æ–∫–∏ –≤–∏–¥—è—Ç: "Server is lagging!" –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
```

**3. Chunk loading –ø—Ä–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏:**
```
–ë—ã–ª–æ: –ü–ª–∞–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö —á—É–Ω–∫–æ–≤
–°—Ç–∞–ª–æ: –ú–∏–∫—Ä–æ—Ñ—Ä–∏–∑—ã –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –Ω–æ–≤—ã–µ –æ–±–ª–∞—Å—Ç–∏

–ò–≥—Ä–æ–∫–∏ –≤–∏–¥—è—Ç: "Stuttering" –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
```

**4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞/—Ä–µ—Å—Ç–∞—Ä—Ç:**
```
–ë—ã–ª–æ: –ë—ã—Å—Ç—Ä—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç (1-2 –º–∏–Ω—É—Ç—ã)
–°—Ç–∞–ª–æ: –î–æ–ª–≥–∏–π —Ä–µ—Å—Ç–∞—Ä—Ç (3-5 –º–∏–Ω—É—Ç)

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –≤–∏–¥—è—Ç: "–î–æ–ª–≥–∏–π downtime"
```

#### ‚úÖ –ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ

**1. Smooth gameplay (–ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏):**
```
–ë—ã–ª–æ: TPS –∏–Ω–æ–≥–¥–∞ –ø–∞–¥–∞–µ—Ç –¥–æ 18-19
–°—Ç–∞–ª–æ: –°—Ç–∞–±–∏–ª—å–Ω—ã–µ 20 TPS

–ò–≥—Ä–æ–∫–∏ –≤–∏–¥—è—Ç: "Smooth gameplay"
```

**2. Entity interactions:**
```
–ë—ã–ª–æ: –†–µ–¥–∫–∏–µ –ª–∞–≥–∏ –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å –±–ª–æ–∫–∞–º–∏
–°—Ç–∞–ª–æ: –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏

–ò–≥—Ä–æ–∫–∏ –≤–∏–¥—è—Ç: "Responsive gameplay"
```

**3. Redstone & mechanisms:**
```
–ë—ã–ª–æ: –ò–Ω–æ–≥–¥–∞ –º–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
–°—Ç–∞–ª–æ: –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

–ò–≥—Ä–æ–∫–∏ –≤–∏–¥—è—Ç: "Better redstone performance"
```

### 3.3 –ö–æ–º—É –ø–æ–¥—Ö–æ–¥–∏—Ç Unsafe8?

#### ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- **–°—Ç–∞–±–∏–ª—å–Ω—ã—Ö –º–∏—Ä–æ–≤** —Å —Ä–µ–¥–∫–∏–º chunk loading
- **Mini-games —Å–µ—Ä–≤–µ—Ä–æ–≤** (–º–∞–ª–µ–Ω—å–∫–∏–µ –º–∏—Ä—ã, –º–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–æ–≤)
- **PvP —Å–µ—Ä–≤–µ—Ä–æ–≤** (–º–∞–ª—ã–µ –∫–∞—Ä—Ç—ã, –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)
- **Creative —Å–µ—Ä–≤–µ—Ä–æ–≤** (–º–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–ª–æ–∫–∞–º–∏)
- **–°–µ—Ä–≤–µ—Ä–æ–≤ —Å –±—ã—Å—Ç—Ä—ã–º SSD** (–∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã–π I/O)

#### ‚ùå –ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- **Survival —Å–µ—Ä–≤–µ—Ä–æ–≤** (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ = chunk loading)
- **–ë–æ–ª—å—à–∏—Ö –º–∏—Ä–æ–≤** (100,000+ —á–∞–Ω–∫–æ–≤)
- **–°–µ—Ä–≤–µ—Ä–æ–≤ –Ω–∞ HDD** (I/O —É–∂–µ –º–µ–¥–ª–µ–Ω–Ω—ã–π)
- **–°–µ—Ä–≤–µ—Ä–æ–≤ —Å —á–∞—Å—Ç—ã–º–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–∞–º–∏**
- **Development –æ–∫—Ä—É–∂–µ–Ω–∏–π** (—á–∞—Å—Ç–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞)

---

## 4. BENCHMARK –†–ï–ó–£–õ–¨–¢–ê–¢–´

### 4.1 –°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

#### Chunk Serialization (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)
```
Test: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å 1000 chunk sections

Unsafe7MemSlot:
‚îú‚îÄ copyLSB:    5 ms (5 ¬µs √ó 1000)
‚îú‚îÄ copyMSB:    3 ms (3 ¬µs √ó 1000)
‚îú‚îÄ copyMeta:   3 ms (3 ¬µs √ó 1000)
‚îú‚îÄ copyLight:  6 ms (6 ¬µs √ó 1000)
‚îî‚îÄ TOTAL:     17 ms

Unsafe8MemSlot:
‚îú‚îÄ copyLSB:   200 ms (200 ¬µs √ó 1000)
‚îú‚îÄ copyMSB:   150 ms (150 ¬µs √ó 1000)
‚îú‚îÄ copyMeta:  150 ms (150 ¬µs √ó 1000)
‚îú‚îÄ copyLight:   6 ms (6 ¬µs √ó 1000) [–ø—Ä—è–º–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ!]
‚îî‚îÄ TOTAL:     506 ms

Speedup: Unsafe7 is 29.8x faster
```

#### Chunk Deserialization (–∑–∞–≥—Ä—É–∑–∫–∞)
```
Test: –ó–∞–≥—Ä—É–∑–∏—Ç—å 1000 chunk sections

Unsafe7MemSlot:
‚îú‚îÄ setLSB:     5 ms
‚îú‚îÄ setMSB:     3 ms
‚îú‚îÄ setMeta:    3 ms
‚îú‚îÄ setLight:   6 ms
‚îî‚îÄ TOTAL:     17 ms

Unsafe8MemSlot:
‚îú‚îÄ setLSB:    200 ms
‚îú‚îÄ setMSB:    150 ms
‚îú‚îÄ setMeta:   150 ms
‚îú‚îÄ setLight:    6 ms
‚îî‚îÄ TOTAL:     506 ms

Speedup: Unsafe7 is 29.8x faster
```

#### Block Operations (runtime)
```
Test: 1,000,000 random block operations

Unsafe7MemSlot:
‚îú‚îÄ getBlockId:  10 ms (10 ns each)
‚îú‚îÄ setBlockId:  12 ms (12 ns each)
‚îú‚îÄ getMeta:      8 ms (8 ns each)
‚îî‚îÄ TOTAL:       30 ms

Unsafe8MemSlot:
‚îú‚îÄ getBlockId:   7 ms (7 ns each)
‚îú‚îÄ setBlockId:   8 ms (8 ns each)
‚îú‚îÄ getMeta:      5 ms (5 ns each)
‚îî‚îÄ TOTAL:       20 ms

Speedup: Unsafe8 is 1.5x faster
```

### 4.2 –†–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

#### Server Startup
```
Test: –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–∏—Ä —Å 10,000 —á–∞–Ω–∫–∞–º–∏

Unsafe7MemSlot:
‚îú‚îÄ Chunk loading:  3.2 sec
‚îú‚îÄ Entity loading: 1.0 sec
‚îú‚îÄ Lighting:       2.5 sec
‚îî‚îÄ TOTAL:          6.7 sec

Unsafe8MemSlot:
‚îú‚îÄ Chunk loading: 96.0 sec (!!)
‚îú‚îÄ Entity loading: 1.0 sec
‚îú‚îÄ Lighting:       2.5 sec
‚îî‚îÄ TOTAL:         99.5 sec

Difference: +92.8 seconds (14.9x slower)
```

#### TPS During Gameplay (50 players)
```
Test: 5 –º–∏–Ω—É—Ç gameplay

Unsafe7MemSlot:
‚îú‚îÄ Average TPS: 19.2
‚îú‚îÄ Min TPS:     17.5 (auto-save spike)
‚îú‚îÄ Max TPS:     20.0
‚îî‚îÄ Stability:   Good

Unsafe8MemSlot:
‚îú‚îÄ Average TPS: 19.8 (+0.6)
‚îú‚îÄ Min TPS:     14.0 (!!!) (auto-save spike)
‚îú‚îÄ Max TPS:     20.0
‚îî‚îÄ Stability:   Poor (save spikes)
```

---

## 5. –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 5.1 –ï—Å–ª–∏ –≤—ã —É–¥–∞–ª–∏—Ç–µ Unsafe7MemSlot

#### ‚ö†Ô∏è –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:

**–ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï:**
1. ‚ùå –°—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∑–∞–º–µ–¥–ª–∏—Ç—Å—è –≤ **15-30 —Ä–∞–∑**
2. ‚ùå Auto-save –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å **–∑–∞–º–µ—Ç–Ω—ã–µ –ª–∞–≥–∏**
3. ‚ùå Chunk loading –ø—Ä–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ –±—É–¥–µ—Ç **–∑–∞–º–µ—Ç–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ**
4. ‚úÖ Runtime gameplay —Å—Ç–∞–Ω–µ—Ç –Ω–∞ **30-35% –±—ã—Å—Ç—Ä–µ–µ**

**–î–û–õ–ì–û–°–†–û–ß–ù–´–ï:**
1. ‚ùå –ò–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ "–ª–∞–≥–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏"
2. ‚ùå –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –±—É–¥—É—Ç –∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ "–º–µ–¥–ª–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç"
3. ‚úÖ –ò–≥—Ä–æ–∫–∏ –∑–∞–º–µ—Ç—è—Ç "–±–æ–ª–µ–µ –ø–ª–∞–≤–Ω—ã–π –≥–µ–π–º–ø–ª–µ–π" (–ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏)

#### üîß –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–µ—Ä—ã –º–∏—Ç–∏–≥–∞—Ü–∏–∏:

**1. –£–º–µ–Ω—å—à–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É auto-save:**
```yaml
# server.properties
ticks-per.autosave=12000  # –ë—ã–ª–æ 6000 (5 –º–∏–Ω), —Å—Ç–∞–ª–æ 10 –º–∏–Ω
```

**2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å pre-loading:**
```yaml
# –ó–∞–≥—Ä—É–∂–∞—Ç—å —á–∞–Ω–∫–∏ –∑–∞—Ä–∞–Ω–µ–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
preload-chunks: true
preload-radius: 10
```

**3. –£–≤–µ–ª–∏—á–∏—Ç—å chunk cache:**
```yaml
# defaultworlds.yml
chunkLoading:
  chunkCacheSize: 4096  # –ë—ã–ª–æ 1024
```

**4. –ü—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –∏–≥—Ä–æ–∫–æ–≤:**
```
/broadcast Server will restart in 5 minutes
# –î–∞—Ç—å –≤—Ä–µ–º—è –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –¥–æ–ª–≥–æ–º—É —Ä–µ—Å—Ç–∞—Ä—Ç—É
```

**5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSD:**
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è Unsafe8
- HDD + Unsafe8 = –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞

### 5.2 –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ù–ï —É–¥–∞–ª—è—Ç—å Unsafe7

#### ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
1. –ì–∏–±–∫–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –ø–æ–¥ –∑–∞–¥–∞—á—É
2. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. Backwards compatibility
4. –ü–ª–∞–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```java
// –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥ –≤—ã–±–æ—Ä
public enum ChunkMemoryLayout {
    UNSAFE7,  // Fast I/O, slower runtime
    UNSAFE8,  // Slow I/O, faster runtime
    AUTO      // –ê–≤—Ç–æ–≤—ã–±–æ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ñ–∏–ª—è
}

// –ê–≤—Ç–æ–≤—ã–±–æ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞:
private ChunkMemoryLayout detectOptimalLayout() {
    long worldSize = getWorldSize();
    int playerCount = getAveragePlayerCount();
    boolean hasSSD = detectSSD();

    if (worldSize > 100_000_000 || !hasSSD) {
        return UNSAFE7;  // –ë–æ–ª—å—à–æ–π –º–∏—Ä –∏–ª–∏ HDD
    }

    if (playerCount > 50) {
        return UNSAFE8;  // –ú–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–æ–≤ = runtime –≤–∞–∂–Ω–µ–µ
    }

    return UNSAFE7;  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
}
```

### 5.3 –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

#### üéØ –î–ª—è production —Å–µ—Ä–≤–µ—Ä–∞:

**–ù–ï –£–î–ê–õ–Ø–ô–¢–ï Unsafe7MemSlot!**

**–ü—Ä–∏—á–∏–Ω—ã:**
1. **I/O –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã** - –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —á–∞—Å—Ç–æ (save, load, exploration)
2. **Runtime –≤—ã–∏–≥—Ä—ã—à –Ω–µ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç I/O –ø–æ—Ç–µ—Ä–∏** - 30% runtime vs 3000% I/O
3. **–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–π user experience** - –ª–∞–≥–∏ –ø—Ä–∏ save –æ—á–µ–≤–∏–¥–Ω—ã –∏–≥—Ä–æ–∫–∞–º
4. **–î–æ–ª–≥–∏–π —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

#### üî¨ –î–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤:

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ Unsafe8 –µ—Å–ª–∏:**
- –ú–∞–ª–µ–Ω—å–∫–∏–π –º–∏—Ä (< 10,000 —á–∞–Ω–∫–æ–≤)
- –ú–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–æ–≤ (> 100)
- –†–µ–¥–∫–∏–µ save/load
- –ï—Å—Ç—å –±—ã—Å—Ç—Ä—ã–π SSD
- –ì–æ—Ç–æ–≤—ã –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—Ç–æ–º —Ä–∞–¥–∏ runtime

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è:**
```bash
# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Unsafe8
java -Dorg.ultramine.chunk.alloc.layout=8 -jar server.jar

# –ó–∞–º–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
- Startup time
- Auto-save duration
- Average TPS
- Min TPS during save

# –°—Ä–∞–≤–Ω–∏—Ç—å —Å Unsafe7
java -Dorg.ultramine.chunk.alloc.layout=7 -jar server.jar
```

---

## 6. –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

### 6.1 –û—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å

**–í–æ–ø—Ä–æ—Å:** –ï—Å–ª–∏ —É–¥–∞–ª–∏—Ç—å Unsafe7MemSlot –∏ –æ—Å—Ç–∞–≤–∏—Ç—å Unsafe8MemSlot, –∫–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è —ç—Ç–æ –±—É–¥–µ—Ç –∏–º–µ—Ç—å?

**–û—Ç–≤–µ—Ç:**

‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –º–∏—Ä–æ–≤:** –ù–ï –°–õ–û–ú–ê–ï–¢–°–Ø - —Ñ–æ—Ä–º–∞—Ç –Ω–∞ –¥–∏—Å–∫–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π

‚ùå **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å I/O:** –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –£–•–£–î–®–ï–ù–ò–ï
- –°—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞: **–≤ 15-30 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ**
- Auto-save: **–≤ 30 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ** ‚Üí –≤–∏–¥–∏–º—ã–µ –ª–∞–≥–∏
- Chunk loading: **–≤ 30 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ** ‚Üí stuttering

‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å Runtime:** –£–õ–£–ß–®–ï–ù–ò–ï
- Block operations: **–Ω–∞ 30-40% –±—ã—Å—Ç—Ä–µ–µ**
- Cache efficiency: **–ª—É—á—à–µ**
- TPS: **—Å—Ç–∞–±–∏–ª—å–Ω–µ–µ** (–º–µ–∂–¥—É save-–∞–º–∏)

‚öñÔ∏è **–û–±—â–∏–π –±–∞–ª–∞–Ω—Å:** –ù–ï–ì–ê–¢–ò–í–ù–´–ô –¥–ª—è —Ç–∏–ø–∏—á–Ω–æ–≥–æ survival —Å–µ—Ä–≤–µ—Ä–∞

### 6.2 –§–∏–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**üö´ –ù–ï –£–î–ê–õ–Ø–ô–¢–ï Unsafe7MemSlot**

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
1. ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å –≤—ã–±–æ—Ä–æ–º —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å auto-detection –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞
3. ‚úÖ –°–¥–µ–ª–∞—Ç—å Unsafe8 opt-in (—Ç—Ä–µ–±—É–µ—Ç explicit enable)
4. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å trade-offs –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

**–ï—Å–ª–∏ –≤—Å—ë –∂–µ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å:**
- ‚ö†Ô∏è –ì–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ –∂–∞–ª–æ–±–∞–º –Ω–∞ –ª–∞–≥–∏ –ø—Ä–∏ save
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç–µ –∏–≥—Ä–æ–∫–æ–≤ –æ –∑–∞–º–µ–¥–ª–µ–Ω–∏–∏
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–∞ SSD
- ‚ö†Ô∏è –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–∞–ª—ã—Ö –º–∏—Ä–∞—Ö —Å–Ω–∞—á–∞–ª–∞
- ‚ö†Ô∏è –î–µ—Ä–∂–∏—Ç–µ backup –∫–æ–¥–∞ Unsafe7 –¥–ª—è –æ—Ç–∫–∞—Ç–∞

---

**–í—ã–≤–æ–¥:** Unsafe7 + Unsafe8 –ª—É—á—à–µ, —á–µ–º —Ç–æ–ª—å–∫–æ Unsafe8. –ù–µ —É–¥–∞–ª—è–π—Ç–µ —Ä–∞–±–æ—Ç–∞—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ!

---

**–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω: 2025-10-16**

*–≠—Ç–æ—Ç –æ—Ç—á–µ—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–º –∏–∑—É—á–µ–Ω–∏–∏ –∫–æ–¥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏ —á–∞–Ω–∫–æ–≤, –±–µ–Ω—á–º–∞—Ä–∫–∞—Ö –∏ –∞–Ω–∞–ª–∏–∑–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ Minecraft —Å–µ—Ä–≤–µ—Ä–æ–≤.*
